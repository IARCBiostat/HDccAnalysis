% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sim_cox_age_data_helpers.R
\name{.rate_and_band_at_age}
\alias{.rate_and_band_at_age}
\title{Retrieve baseline hazard rate and band index at a given attained age}
\usage{
.rate_and_band_at_age(attained_age, lookup_table, tol = 1e-12)
}
\arguments{
\item{attained_age}{Numeric scalar giving the current attained age.}

\item{lookup_table}{List containing numeric vectors \code{lo},
\code{hi}, and \code{rate}, defining the lower bounds,
upper bounds, and baseline hazard rates for each age band.}

\item{tolerance}{Small non-negative numeric scalar used when
comparing \code{attained_age} to band boundaries.}
}
\value{
A list with components:
\describe{
\item{band_index}{Integer index of the age band containing
\code{attained_age}.}
\item{baseline_rate}{Numeric scalar baseline hazard rate for the
identified band.}
}

If \code{attained_age} lies outside the support of the age bands,
both elements are returned as \code{NA}.
}
\description{
Determines which attained-age band contains a given
\code{attained_age} and returns both the band index and the
corresponding baseline hazard rate.
}
\details{
Age bands are defined by \code{lookup_table$lo} and
\code{lookup_table$hi} and are treated as left-closed,
right-open intervals: \code{[lo, hi)}. The final band is treated
as closed on the right to ensure coverage of its upper boundary.

A numerical \code{tolerance} is used to avoid instability at band
boundaries due to floating-point rounding.
}
\examples{
lookup_table <- list(
  lo   = c(50, 60),
  hi   = c(60, 70),
  rate = c(0.01, 0.02)
)

.rate_and_band_at_age(attained_age = 55,
                      lookup_table = lookup_table)
}
